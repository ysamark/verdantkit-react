import{j as r}from"./jsx-runtime-Cw0GR0a5.js";import{r as l}from"./index-CTjT7uj6.js";import{c as C}from"./index-DuhVpxmO.js";const p=l.createContext({}),y=e=>r.jsx(p.Provider,{...e});y.__docgenInfo={description:"",methods:[],displayName:"SelectableElementsContextProvider"};const M=()=>{const[e,t]=l.useState([]);return{selectedElements:e,selectElement(s){t([...e,{id:s}])},deselectElement(s){t(e.filter(o=>o.id!==s))},isElementSelected(s){return e.some(o=>o.id===s)},selectElements(s){const o=s.map(a=>({id:a}));t([...e,...o])},deselectElements(s){t(e.filter(o=>!s.includes(o.id)))}}},D=()=>l.useContext(p),w=l.forwardRef(function(t,n){return r.jsx("div",{ref:n,className:C(t.className,"bg-pink-600 bg-opacity-15 border-solid border-[1px] border-pink-300 fixed z-[555]",t.cursorStyle==="radial"?"rounded-full":"rounded-sm")})});w.__docgenInfo={description:"",methods:[],displayName:"SelectCursor"};const P=(e,t)=>{const n={x:0,y:0,height:0,width:0};n.x=t.x,n.y=t.y;const s=o=>{n.width=o};return s(e.clientX-n.x),n.height=e.clientY-n.y,e.clientX<=t.x&&(s(t.x-e.clientX),n.x-=n.width),e.clientY<=t.y&&(n.height=t.y-e.clientY,n.y-=n.height),n},R=({width:e,height:t,cursorStyle:n})=>n!=="radial"?{width:e,height:t}:e>=t?{width:e,height:e}:{height:t,width:t},I=l.forwardRef(function({children:t,backgroundColor:n,borderColor:s,cursorStyle:o,...a},j){const[b,x]=l.useState(!1),[E,S]=l.useState({x:0,y:0}),f=l.useRef(null),i=l.useRef(!1),d=l.useRef({x:0,y:0,state:{x:0,y:0}});l.useEffect(()=>{const c=()=>{i.current=!1,x(!1)},h=N=>{if(!f.current)return;const{width:A,height:O,...u}=P(N,d.current.state),m=R({height:O,width:A,cursorStyle:o});o==="radial"&&(u.x-=m.width/2,u.y-=m.height/2),Object.assign(f.current.style,{top:`${u.y}px`,left:`${u.x}px`,width:`${m.width}px`,height:`${m.height}px`})};return window.addEventListener("mouseup",c),window.addEventListener("mousemove",h),()=>{window.removeEventListener("mouseup",c),window.removeEventListener("mousemove",h)}},[]);const _=c=>{i.current=!0,d.current.x=c.clientX,d.current.y=c.clientY,Object.assign(d.current.state,{x:c.clientX,y:c.clientY}),setTimeout(()=>{i.current&&(S({x:c.clientX,y:c.clientY}),x(!0))},100)},v=()=>{i.current=!1,S({x:0,y:0}),x(!1)};return r.jsxs("div",{...a,ref:j,onMouseDown:_,onMouseUp:v,className:C(a.className,b?"[&_*]:pointer-events-auto":null,"[&_*]:select-none select-none"),children:[t,b&&r.jsx(w,{backgroundColor:n,ref:f,borderColor:s,cursorStyle:o,style:{top:`${E.y}px`,left:`${E.x}px`}})]})});I.__docgenInfo={description:"",methods:[],displayName:"SelectableAreaContainer"};const X=l.createContext({}),g=e=>r.jsx(X.Provider,{...e});g.__docgenInfo={description:"",methods:[],displayName:"SelectableElementContextProvider"};const Y=e=>{const t=D();if(!t.selectedElements)throw new Error("SelectableElement cannot be used outside a SelectableArea");const n=t.isElementSelected(e.id),s={selected:n,inputProps:{type:"checkbox",checked:n,onChange(){if(t.isElementSelected(e.id))return t.deselectElement(e.id);t.selectElement(e.id)}}},o=e.element;return r.jsx(g,{value:s,children:o?r.jsx(o,{...s}):e.children})};Y.__docgenInfo={description:"",methods:[],displayName:"SelectableElement"};const $=({children:e})=>{const t=M();return r.jsx(y,{value:t,children:e})};$.__docgenInfo={description:"",methods:[],displayName:"SelectableArea"};export{X as S,I as a,Y as b,$ as c,D as u};
