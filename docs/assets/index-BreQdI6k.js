import{j as a}from"./jsx-runtime-Cw0GR0a5.js";import{r as i,R as v}from"./index-CTjT7uj6.js";import{g as $,a as R}from"./index-DuhVpxmO.js";import{d as L}from"./index-hRver1QQ.js";import{S as P}from"./scroll-area-HcUfDbHp.js";import{c as Y}from"./utils-DnNDQBbQ.js";const H=i.createContext({}),j=o=>a.jsx(H.Provider,{...o});j.__docgenInfo={description:"",methods:[],displayName:"DropDownContextProvider"};const C=()=>i.useContext(H),F=o=>{const[t,n]=i.useState(!1),e=i.useRef(null);return{props:o,show:t,setShow:n,buttonElementRef:e,toggle(){n(!t)}}},B=i.forwardRef(function({asChild:t,...n},e){const c=C(),r=()=>{c.setShow(!0)};if(i.useImperativeHandle(e,()=>c.buttonElementRef.current),t){const[s]=v.Children.toArray(n.children);if(v.isValidElement(s)){const d=typeof s.props=="object"&&s.props?s.props:{};return{...s,props:{...d,...n,ref:e,onClick:r}}}return s}return a.jsx("button",{...n,type:"button",role:"button",ref:c.buttonElementRef,onClick:r})});B.__docgenInfo={description:"",methods:[],displayName:"DropDownButton"};const O=({dropDownButtonElement:o,dropDownCaretRef:t,dropDownContentElement:n,position:e,y:c})=>{const s=t.current,d=o.getBoundingClientRect(),p=n.getBoundingClientRect(),u=window.getComputedStyle(n).backgroundColor;if(s instanceof HTMLElement){const l=s.getBoundingClientRect(),f=L.noEmpty(u)?u:void 0,D=d.x+d.width/2-l.width/2;let w=c-(l.width-6);e==="top"&&(w+=10+p.height+l.width/2-4);const m=()=>e==="bottom"?`transparent transparent ${f}`:`${f} transparent transparent`;Object.assign(s.style,{left:`${D}px`,top:`${w}px`,borderColor:f?m():void 0})}},x=o=>o.getBoundingClientRect(),z=(o,t,n)=>{const e=x(t),c=x(o),r=10;let s="bottom",d=e.x+e.width/2-c.width/2;d<r&&(d=r);const p=document.body.offsetWidth-r,u=window.innerHeight-r;d+c.width>=p&&(d=p-c.width,d<r&&(d=p*.02));let l=e.y+e.height+r;if(l+c.height>=u){s="top";const D=l;if(l-=c.height+e.height+r*2,l<=r){const w=e.y,m=u-(e.y+e.height);w>=m||(s="bottom",l=D)}}O({dropDownCaretRef:n,dropDownContentElement:o,dropDownButtonElement:t,position:s,y:l});const f={left:`${d}px`,top:`${l}px`};return Object.assign(o.style,f),[x(o),s]},V=({dropDownPosition:o,dropDownContentElementCoordinates:t,contentElement:n,scroll:e})=>{if(o==="bottom"){if(t.y+t.height>=window.innerHeight){const s=window.innerHeight-(t.y+20);if(Object.assign(n.style,{height:`${s}px`}),!e)return!0}return!1}if(t.y<=20){const r=t.y*-1,s=r+t.y+20,d=t.height-(r+20);if(Object.assign(n.style,{top:`${s}px`,height:`${d}px`}),!e)return!0}return!1},W=({divRef:o,event:t})=>{if(!(o.current instanceof HTMLDivElement))return!1;const{clientX:n,clientY:e}=t,r=o.current.getBoundingClientRect();return n<r.x||n>r.x+r.width||e<r.y||e>r.y+r.height},S=i.forwardRef(function(t,n){return a.jsx("div",{...t,ref:n})});S.__docgenInfo={description:"",methods:[],displayName:"DropDownFooter"};const _=i.forwardRef(function(t,n){return a.jsx("div",{...t,ref:n})});_.__docgenInfo={description:"",methods:[],displayName:"DropDownHeader"};const N=i.forwardRef(function(t,n){const e=C(),[c,r]=i.useState(!1),[s,d]=i.useState(e.show);i.useEffect(()=>{d(e.show)},[e.show]);const p=i.useRef(null),u=i.useRef(null),[l,f]=$(t.children,[_,S]);if(i.useImperativeHandle(n,()=>p.current),i.useEffect(()=>{const w=e.buttonElementRef.current,m=p.current,E=g=>{W({divRef:p,event:g})&&e.setShow(!1)},h=()=>{if(m&&w&&s){const[g,I]=z(m,w,u);V({scroll:c,contentElement:m,dropDownPosition:I,dropDownContentElementCoordinates:g})&&r(!0)}},b=()=>{h()},y=()=>{h()};return h(),window.addEventListener("click",E),window.addEventListener("scroll",b),window.addEventListener("resize",y),()=>{window.removeEventListener("click",E),window.removeEventListener("scroll",b),window.removeEventListener("resize",y)}},[s]),!s)return null;const D=c?P:w=>a.jsx(i.Fragment,{children:w.children});return a.jsxs("div",{...t,ref:p,className:Y(t.className,"fixed z-[50] flex flex-col max-w-[96%]"),children:[a.jsx("i",{className:"w-3 block fixed border-solid border-[16px]",ref:u}),l[0],a.jsx(D,{className:"w-full mr-2 flex flex-grow",children:f}),l[1]]})});N.__docgenInfo={description:"",methods:[],displayName:"DropDownContent"};const k=()=>{const o=C(),t=R(o.props.children,B),n=R(o.props.children,N);return a.jsxs(i.Fragment,{children:[t,n]})};k.__docgenInfo={description:"",methods:[],displayName:"DropDownWrapper"};const A=o=>{const t=F(o);return a.jsx(j,{value:t,children:a.jsx(k,{})})};A.__docgenInfo={description:"",methods:[],displayName:"DropDown"};export{A as D,B as a,N as b,_ as c,S as d};
