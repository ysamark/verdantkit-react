import{j as t}from"./jsx-runtime-Cw0GR0a5.js";import{r as c}from"./index-CTjT7uj6.js";import{I as z,g as C,h as O,a as D}from"./index-00KHdqLW.js";import{d as m}from"./index-hRver1QQ.js";import{c as E}from"./utils-DnNDQBbQ.js";import{c as I}from"./index-DuhVpxmO.js";import{S as _}from"./scroll-area-HcUfDbHp.js";const g=c.createContext({}),b=e=>t.jsx(g.Provider,{...e});b.__docgenInfo={description:"",methods:[],displayName:"SelectFieldContextProvider"};const f=()=>c.useContext(g),L=e=>{const[n,l]=c.useState(""),[i,s]=c.useState(!1),[o,r]=c.useState(!1),[d,u]=c.useState(),[a,x]=c.useState([e??[]]),p=c.useRef(!0);return c.useEffect(()=>{x([e])},[e]),{query:n,setQuery:l,typing:i,setTyping:s,opened:o,setOpened:r,selectedOption:d,setSelectedOption:u,listDataStack:a,setListDataStack:x,closeOnSelectFieldContainerBlurState:p,resetState:()=>{r(!1),l(""),s(!1)}}},S=()=>{const{setQuery:e,query:n,closeOnSelectFieldContainerBlurState:l,resetState:i}=f(),s=()=>{l.current&&i()},o=r=>{const d=r.target;e(d.value)};return t.jsx("input",{value:n,onBlur:s,onChange:o,ref:r=>r==null?void 0:r.focus(),className:"dark:text-zinc-50 w-full py-1 border-0 outline-none bg-transparent cursor-text"})};S.__docgenInfo={description:"",methods:[],displayName:"FilterInput"};function B(e,n){if(!m.noEmpty(e))return;const l=n.find(({value:s})=>s===e);if(l)return l;const i=(s,o)=>{let r=0;for(;r<o.length;r++){const d=o[r];if(d.value===s)return d;if(d.options instanceof Array&&d.options.length>=1){const u=i(s,d.options);if(u)return u}}};return i(e,n)}const v=e=>{const n=f(),l=c.useRef(null),i=()=>{n.typing||n.listDataStack[-1+n.listDataStack.length].length<1&&!n.opened||(n.setOpened(!n.opened),l.current&&(l.current.tabIndex=Math.random(),l.current.focus()))},s=()=>{if(!n.typing){if(n.closeOnSelectFieldContainerBlurState.current)return n.setOpened(!1);n.opened&&l.current&&l.current.focus()}},o=r=>{r.key.length<2&&n.setTyping(!0),r.key.toLowerCase()==="escape"&&n.resetState()};return t.jsx("div",{ref:l,onKeyDown:o,onBlur:s,onClick:i,className:E("w-full rounded-md block py-[18px] px-3 border-[1px] border-solid cursor-pointer select-none [&_*]:cursor-pointer [&_*]:select-none outline-none","bg-zinc-50 border-zinc-300 dark:bg-zinc-800 dark:border-zinc-600",n.opened?"":" hover:bg-zinc-200 active:bg-zinc-300 dark:hover:bg-zinc-700 dark:active:bg-zinc-600"),children:e.children})};v.__docgenInfo={description:"",methods:[],displayName:"SelectFieldElementContainer"};const h=e=>{const n=z[e.name];return t.jsx(n,{})};h.__docgenInfo={description:"",methods:[],displayName:"Icon"};const y=e=>{const n=e.options instanceof Array&&e.options.length>=1,l=s=>{s.preventDefault(),typeof e.onSelect=="function"&&e.onSelect(e)},i=s=>{s.preventDefault(),typeof e.onOpen=="function"&&e.onOpen(e)};return t.jsxs("div",{className:"w-full h-auto block relative",children:[t.jsx("button",{type:"button",role:"button",title:e.label,onClick:l,className:I("w-full h-auto p-3 border-0 outline-0 bg-transparent text-left hover:bg-zinc-200 active:bg-zinc-300 dark:hover:bg-zinc-700 dark:active:bg-zinc-600 dark:text-zinc-50",e.selected?"bg-zinc-200 dark:bg-zinc-700":null),children:t.jsxs("div",{className:"w-full flex flex-row items-center gap-2",children:[e.icon&&t.jsx("div",{className:"inline-flex",children:t.jsx("div",{children:t.jsx(h,{name:e.icon})})}),t.jsx("div",{className:"w-full",children:t.jsx("span",{className:"inline-flex items-center",children:e.label})})]})}),n&&t.jsx("div",{className:"inline-flex items-center justify-end",children:t.jsxs("button",{type:"button",role:"button",onClick:i,className:"flex flex-row gap-2 items-center justify-end bg-transparent outline-0 border-0 absolute right-3 top-[3px] pt-2 px-4 pb-[11px] rounded-md dark:text-zinc-200 hover:bg-zinc-300 dark:hover:bg-zinc-700",children:[t.jsx("div",{className:"inline-flex",children:t.jsx("span",{children:"Entrar Aqui"})}),t.jsx("div",{className:"inline-flex items-center",children:t.jsx("div",{children:t.jsx(h,{name:"FaAngleRight"})})})]})})]})};y.__docgenInfo={description:"",methods:[],displayName:"Option"};const j=()=>{const e=f(),n=()=>{e.setListDataStack(e.listDataStack.slice(0,-1))};return t.jsx(c.Fragment,{children:e.listDataStack.length>=2&&t.jsx("div",{className:"w-full h-auto flex flex-row items-center py-2 px-3",children:t.jsxs("button",{onClick:n,type:"button",className:"bg-transparent border-0 outline-none pt-[7px] pb-[9px] px-4 rounded-md flex items-center flex-row gap-2 hover:bg-zinc-100 active:bg-zinc-200 dark:hover:bg-zinc-700 dark:active:bg-zinc-600 dark:text-zinc-100",children:[t.jsx("i",{className:"inline-flex items-center",children:t.jsx(C,{})}),t.jsx("div",{className:"w-full",children:t.jsx("span",{children:"Voltar"})})]})})})};j.__docgenInfo={description:"",methods:[],displayName:"BackButton"};const k=()=>t.jsx("li",{className:"w-full flex flex-row justify-center py-5 px-8 text-center",children:t.jsx("p",{className:"text-lg font-light text-zinc-600 dark:text-zinc-300 inline-flex",children:"Sem registros a apresentar"})});k.__docgenInfo={description:"",methods:[],displayName:"EmptyListFallback"};const H=e=>{const n=e.current;if(n instanceof HTMLElement){const l=n.children[0];l instanceof HTMLDivElement&&(l.style.height="auto");const i=n.getBoundingClientRect();if(i.y+i.height>=window.innerHeight){const o=Math.round(window.innerHeight-(i.y+30));l instanceof HTMLDivElement&&(l.style.height=`${o}px`)}}},N=()=>{const e=f(),n=c.useRef(null);c.useEffect(()=>{H(n)},[e.opened,e.listDataStack]);const l=a=>{e.setSelectedOption(a),e.resetState()},i=()=>{e.closeOnSelectFieldContainerBlurState.current=!1},s=()=>{e.closeOnSelectFieldContainerBlurState.current=!0},o=({options:a})=>{a instanceof Array&&a.length>=1&&e.setListDataStack([...e.listDataStack,a])},r=a=>m.noEmpty(e.query)?m.strMatches(a.label,e.query):!0,u=e.listDataStack[-1+e.listDataStack.length].filter(r);return t.jsx("div",{ref:n,onMouseEnter:i,onMouseLeave:s,className:"w-full h-max block absolute top-[calc(100%-4px)] left-0 right-0 border-x border-b border-solid rounded-es-md rounded-ee-md z-10 shadow-lg bg-zinc-50 border-zinc-300 dark:bg-zinc-800 dark:border-zinc-600",children:t.jsxs(_,{type:"hover",className:"w-full pb-4",children:[t.jsx(j,{}),u.map((a,x)=>{var p;return c.createElement(y,{...a,key:x,selected:((p=e.selectedOption)==null?void 0:p.value)===a.value,onSelect:l,onOpen:o})}),u.length<1&&t.jsx(k,{})]})})};N.__docgenInfo={description:"",methods:[],displayName:"SelectList"};const w=function(e){const n=f(),l=n.opened?O:D,i=B(e.defaultValue,e.data??[]),s=()=>n.selectedOption?n.selectedOption.label:i?i.label:typeof e.label=="string"&&/\S/.test(e.label)?e.label:"Selecionar",o=()=>n.selectedOption?String(n.selectedOption.value):i?String(i.value):"";return t.jsxs(c.Fragment,{children:[t.jsx("input",{...e,value:o(),type:"hidden",readOnly:!0}),t.jsx(v,{children:t.jsx("div",{className:"w-full h-auto block",children:t.jsxs("div",{className:"w-full flex flex-row items-center justify-start",children:[t.jsx("div",{className:"dark:text-zinc-50 w-full inline-flex flex-row items-center",children:n.typing&&t.jsx(S,{})||t.jsx("span",{className:"w-full block whitespace-nowrap overflow-hidden text-ellipsis",children:s()})}),t.jsx("div",{className:"pl-4 inline-flex items-center text-zinc-700",children:t.jsx(l,{})})]})})}),n.opened&&t.jsx(N,{})]})};w.__docgenInfo={description:"",methods:[],displayName:"SelectFieldElement"};const F=e=>{const n=L(e.data);return t.jsx(b,{value:n,children:e.children})};F.__docgenInfo={description:"",methods:[],displayName:"Wrapper"};const M=e=>{const n=e.data??[];return t.jsx(F,{data:n,children:t.jsx("div",{className:"w-full h-auto mb-4 block relative",children:t.jsx(w,{})})})};M.__docgenInfo={description:"",methods:[],displayName:"SelectField"};export{M as S};
