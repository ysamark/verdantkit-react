import{j as a}from"./jsx-runtime-Cw0GR0a5.js";import{d}from"./index-hRver1QQ.js";import{s as b,c as w}from"./index-DuhVpxmO.js";import{r as u}from"./index-CTjT7uj6.js";import{d as D}from"./index-00KHdqLW.js";const y=e=>/(\[\])$/.test(e)?e:`${e}[]`,F=e=>{const i=/^(.[^[]+)/,s=e.match(i);return s?[s[0],e.replace(i,"")]:[e,""]},h=u.createContext({}),T=e=>a.jsx(h.Provider,{...e});T.__docgenInfo={description:"",methods:[],displayName:"TagsFieldContextProvider"};const _=(e,i)=>{const[s,n]=u.useState(e),[c,o]=u.useState(!1),r=u.useId();return{tags:s,props:i,fieldId:r,focused:c,setTags:function(t){n(t)},popTags:function(){n(s.slice(0,-1))},clearTags:function(){n([])},addTag:function(t){n([...s,t])},removeTag:function(t){n(s.filter(f=>f.slag!==t))},blur:function(){o(!1)},focus:function(){o(!0)},toggleFocus:function(){o(!c)}}},x=()=>u.useContext(h),j=()=>{const{tags:e,props:i}=x(),[s,n]=F(i.name||"slag"),c=y(`${s}[deleted]${n}`);return a.jsx(u.Fragment,{children:e.filter(o=>o.deleted).map(o=>a.jsx("input",{type:"hidden",name:`${c}`,value:d.generateSlagFromTitle(o.title)},o.id))})};j.__docgenInfo={description:"",methods:[],displayName:"DeletedTags"};const N=()=>{const{tags:e,props:i,fieldId:s,setTags:n,...c}=x(),o=t=>{const f=t.key.toLowerCase();if(t.ctrlKey&&f==="v"){const m=t.target,g=m.value.split(",").filter(l=>d.noEmpty(l)).map(l=>l.trim()).map(l=>{const p=b(l);return{title:p,id:d.generateRandomId(),slag:d.generateSlagFromTitle(p)}});n([...e,...g]),m.value=""}},r=t=>{const f=[",",";","enter"],m=t.key.toLowerCase(),g=t.target;if(f.indexOf(m)>=0){t.preventDefault();const l=t.target;n([...e,{id:d.generateRandomId(),slag:d.generateSlagFromTitle(l.value,!1),title:l.value}]),l.value=""}m==="backspace"&&!d.noEmpty(g.value)&&e.length>=1&&n(e.slice(0,-1))};return a.jsx("input",{...i,name:void 0,id:s,type:"text",autoCapitalize:"off",autoComplete:"off",spellCheck:!1,onKeyDown:r,onKeyUp:o,onFocus:()=>c.focus(),onBlur:()=>c.blur(),className:"ml-3 outline-0 bg-transparent border-0 text-xl font-light dark:text-zinc-50"})};N.__docgenInfo={description:"",methods:[],displayName:"TagInput"};const k=e=>{const[i,s]=u.useState(!1),[n,c]=u.useState(e.slag??""),o=l=>{l&&l.focus()},r=()=>{s(!0)},t=l=>{if(l.key==="Enter"){l.preventDefault();const p=n,z=l.target;typeof e.onUpdate=="function"&&e.onUpdate(e,{...e,slag:p}),c(b(z.value)),s(!1)}},f=()=>{s(!1)},m=()=>{typeof e.onDelete=="function"&&e.onDelete(e)},g=y(d.noEmpty(e.name)?e.name:"tags");return a.jsx("li",{className:"inline-flex",children:a.jsxs("span",{onDoubleClick:r,className:"flex flex-row gap-2 items-center pt-1 pb-2 pl-5 pr-3 rounded-full bg-zinc-200 text-zinc-800 dark:bg-zinc-700 dark:text-zinc-300",children:[a.jsx("input",{type:"hidden",readOnly:!0,name:g,value:n}),i&&a.jsx("input",{ref:o,type:"text",defaultValue:n,onKeyDown:t,onBlur:f,className:"border-0 outline-0 bg-transparent w-max dark:text-zinc-50"})||a.jsxs(u.Fragment,{children:[n,a.jsx("button",{className:"bg-zinc-300 hover:bg-zinc-400 active:bg-zinc-500 dark:bg-zinc-900 dark:hover:bg-zinc-800 dark:active:bg-zinc-700 border-0 outline-0 p-2 rounded-full text-sm mt-1",type:"button",onClick:m,children:a.jsx(D,{size:10})})]})]})})};k.__docgenInfo={description:"",methods:[],displayName:"TagPreview"};const v=({children:e})=>{const{tags:i,props:s,setTags:n}=x(),c=s.initialData instanceof Array?s.initialData:[],o=r=>{n(i.filter(t=>t.id!==r.id)),c.some(({id:t})=>r.id===t)&&n(i.map(t=>t.id!==r.id?t:{...t,deleted:!0}))};return a.jsxs("ul",{className:"w-full flex flex-row gap-2 flex-wrap",children:[i.map(r=>a.jsx(k,{id:r.id,slag:r.slag,title:r.title,name:s.name,onDelete:o},r.id)),e]})};v.__docgenInfo={description:"",methods:[],displayName:"TagsPreviewList"};const C=e=>{const i=e.initialData instanceof Array?e.initialData:[],s=d.noEmpty(e.label)?e.label:"Tags",n=_(i,e);return a.jsx(T,{value:n,children:a.jsxs("label",{htmlFor:n.fieldId,className:w("w-full rounded-md block py-[18px] transition-shadow px-3 border-[1px] border-solid mb-4 cursor-text bg-zinc-50 border-zinc-300 dark:bg-zinc-800 dark:border-zinc-600",n.focused?"shadow-[0_0_0_.25rem_rgba(13,110,253,.25)] border-[#86b7fe]":null),children:[a.jsx("div",{className:"w-full block pb-6",children:a.jsx("h5",{className:"font-semibold select-none text-sm text-zinc-900 dark:text-zinc-50",children:s})}),a.jsx("div",{className:"w-full block",children:a.jsx(v,{children:a.jsx("li",{className:"inline-flex",children:a.jsx(N,{})})})}),a.jsx(j,{})]})})};C.__docgenInfo={description:"",methods:[],displayName:"TagsField"};export{C as T};
